import React, { useState, useEffect, useRef } from 'react';

function App() {
  const portfolioData = {
    name: "LARMECK ODUOR ODHIAMBO",
    title: "Web Developer | Full-Stack Developer",
    contact: {
      phone: "+254723294700",
      email: "larmeckoduor@gmail.com",
      linkedin: "https://linkedin.com/in/larmeck-oduor-a4753b9a/",
      github: "https://github.com/larmeck",
    },
    profile: "I am a passionate and results-driven Web Developer with a strong foundation in both front-end and back-end technologies. I am proficient in JavaScript, HTML, CSS, PHP, Python, Django, ReactJS, Slim PHP, and Bootstrap 3,4 and 5. My experience includes building scalable and user-centric applications from scratch and across various domains, including e-commerce, supply chain management, and agriculture SaaS. I am highly motivated to solve real-world problems through software and enjoy working in agile environments emphasizing collaboration and innovation. My skills also extend to server management, where I have hands-on experience deploying and maintaining applications, optimizing performance, and ensuring high availability.",
    technicalSkills: {
      languages: ["JavaScript", "HTML", "CSS", "PHP", "Python"],
      frameworksLibraries: ["Django", "Bootstrap", "Slim PHP", "ReactJs"],
      webTechnologies: ["Responsive Design", "RESTful APIs", "AJAX", "JSON", "XML", "WordPress"],
      versionControl: ["Git", "GitHub", "GitLab"],
      databases: ["MySQL", "PostgreSQL"],
      other: ["jQuery", "AJAX", "Node.js", "Docker", "Nginx", "Apache"],
      toolsPlatforms: ["Visual Studio Code", "Postman", "Heroku", "AWS", "Netlify", "Linux/Unix"],
    },
    experience: [
      {
        title: "Web Developer",
        company: "Fremont International Association",
        dates: "Jan 2024 – Present",
        description: [
          "Developed and maintained scalable, enterprise-level web applications for clients in multiple sectors, including supply chain and logistics.",
          "Played a key role in the Supply Chain Management System, a web-based platform developed using Python and MySQL. Optimized real-time processing of supply chain operations and integrated advanced reporting features to aid decision-making.",
          "Led the development of the Mulika Mwizi platform, a crime reporting and alerting tool, Django, which displayed employee objectives, satisfaction rates, and recommendations.",
          "Managed server environments using Docker, Nginx, and AWS, ensuring smooth deployment and scalability.",
          "Conducted regular code reviews and mentored junior developers on best practices in coding, debugging, and performance optimization.",
        ],
      },
      {
        title: "Full-Stack Developer",
        company: "Kilimo SaaS",
        dates: "2019 – 2024",
        description: [
          "Developed and maintained the Kilimo SaaS platform, a cloud-based farm management system for farmers, tracking crop cycles, weather data, and financial records.",
          "Built the back-end of the application using Slim PHP, ensuring a lightweight, high-performance architecture for handling user requests efficiently.",
          "Integrated MySQL for data management and utilized JavaScript for dynamic user interfaces.",
          "Developed RESTful APIs to enable seamless interaction between the front-end and back-end.",
        ],
      },
      {
        title: "React.js Developer",
        company: "Kilimo Online Website",
        dates: "2019 – 2024 (part of Kilimo SaaS experience)",
        description: [
          "Designed and developed a fully responsive, user-friendly agricultural platform using React.js.",
          "Integrated real-time data fetching from APIs to display accurate and dynamic agricultural information.",
          "Utilized React Router to create seamless navigation between product categories, services, and customer resources.",
          "Implemented Redux for state management to handle complex data flow and user interactions.",
          "Optimized performance to ensure fast loading times and smooth interactions across devices.",
          "Developed custom components for interactive user features like product filtering and search functionality.",
          "Ensured cross-browser compatibility and responsiveness, improving the user experience on mobile and desktop devices.",
          "Incorporated security best practices to protect sensitive user information.",
        ],
      },
      {
        title: "Intern – Web Development",
        company: "Uko Technologies",
        dates: "Jan 2015 – Dec 2018",
        description: [
          "Assisted in developing client-facing websites and web applications using HTML, CSS, JavaScript, PHP, and MySQL.",
          "Contributed to the development of a custom inventory management system using JavaScript for the front-end and PHP for server-side functionality.",
          "Worked closely with senior developers to implement database structures, optimize website performance, and ensure that sites were responsive and user-friendly.",
        ],
      },
    ],
    projects: [
      {
        name: "Mulika Mwizi",
        description: "A platform for reporting and tracking crimes in real-time using Python and Django, with Google Maps API for location-based reporting and WebSockets for live notifications.",
        imageUrl: "https://images.unsplash.com/photo-1526628953301-3e589a6a8b74?q=80&w=1974&auto=format&fit=crop",
        githubUrl: "https://github.com/larmeck"
      },
      {
        name: "Kilimo SaaS",
        description: "A cloud-based farm management solution for farmers to track crop cycles, weather, and finances. Built with Slim PHP, React.js, and MySQL.",
        imageUrl: "https://images.unsplash.com/photo-1580983216298-4341a7d80a1e?q=80&w=2070&auto=format&fit=crop",
        githubUrl: "https://github.com/larmeck"
      },
      {
        name: "Supply Chain Management System",
        description: "A web-based inventory and supply chain system using Python and MySQL to improve operational efficiency and provide real-time order tracking and reporting.",
        imageUrl: "https://images.unsplash.com/photo-1556740738-b6a63e27c4df?q=80&w=2070&auto=format&fit=crop",
        githubUrl: "https://github.com/larmeck"
      },
      {
        name: "School Registration System",
        description: "Created a student registration system for schools to automate enrollment, utilizing PHP for server-side logic and MySQL for data management. Built dynamic front-end interactions using JavaScript to enhance the user experience.",
        imageUrl: "https://placehold.co/600x400/1e293b/38bdf8?text=School+Reg",
        githubUrl: "https://github.com/larmeck"
      },
      {
        name: "Website Development",
        description: "Designed and developed multiple custom websites and e-commerce solutions using Bootstrap for responsive design and JavaScript for interactivity. Implemented SEO strategies and optimized for mobile devices.",
        imageUrl: "https://placehold.co/600x400/1e293b/38bdf8?text=Web+Dev",
        githubUrl: "https://github.com/larmeck"
      },
    ],
    education: {
      degree: "Bachelor of Science in Biotechnology",
      university: "Kenyatta University",
      year: "2014",
    },
    certifications: [
      "HTML & CSS – W3Schools",
      "JavaScript – W3Schools",
      "Python – W3Schools",
      "Django – W3Schools",
      "PHP – W3Schools",
      "SQL – W3Schools",
      "Bootstrap – W3Schools",
      "GIT – W3Skulls",
      "ReactJS – W3Skull",
    ],
  };

  const [isMobileMenuOpen, setIsMobileMenuOpen] = useState(false);
  const [isHeaderScrolled, setIsHeaderScrolled] = useState(false);
  const [modalVisible, setModalVisible] = useState(false);
  const [modalContent, setModalContent] = useState({ title: '', text: '' });
  const [coverLetterOutput, setCoverLetterOutput] = useState('');
  const [jobTitleInput, setJobTitleInput] = useState('');
  const [isGeneratingLetter, setIsGeneratingLetter] = useState(false);

  // Ref to hold Lucide icons script
  const lucideScriptRef = useRef(null);

  useEffect(() => {
    // Load Lucide icons script
    if (!lucideScriptRef.current) {
      const script = document.createElement('script');
      script.src = "https://unpkg.com/lucide@latest";
      script.async = true;
      script.onload = () => {
        if (window.lucide) {
          window.lucide.createIcons();
        }
      };
      document.body.appendChild(script);
      lucideScriptRef.current = script;
    } else if (window.lucide) {
      // Re-create icons if component re-renders and script is already loaded
      window.lucide.createIcons();
    }

    const handleScroll = () => {
      setIsHeaderScrolled(window.scrollY > 50);
      if (window.lucide) {
        window.lucide.createIcons(); // Re-create icons on scroll to ensure visibility if they disappear
      }
    };

    window.addEventListener('scroll', handleScroll);

    return () => {
      window.removeEventListener('scroll', handleScroll);
    };
  }, []); // Empty dependency array means this runs once on mount

  // Function to show modal
  const showModal = (title, text) => {
    setModalContent({ title, text });
    setModalVisible(true);
  };

  // Function to hide modal
  const hideModal = () => {
    setModalVisible(false);
    setModalContent({ title: '', text: '' });
  };

  const API_KEY = ""; // Leave empty, Canvas will handle it.
  const API_URL = `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-05-20:generateContent?key=${API_KEY}`;

  const resumeSummary = `
    Larmek Oduor is a results-driven Web Developer with experience in front-end and back-end technologies, including JavaScript, Python, PHP, React.js, Django, and Node.js. He has built scalable applications for e-commerce, supply chain management, and agriculture SaaS.
    Key Experience:
    - Web Developer at Fremont International Association (2024-Present): Developed enterprise web apps for supply chain/logistics using Python, MySQL, Docker, and AWS.
    - Full-Stack Developer at Kilimo SaaS (2019-2024): Developed a farm management SaaS platform using Slim PHP, React.js, and MySQL.
    - Intern at Uko Technologies (2015-2018): Assisted in developing websites with HTML, CSS, JavaScript, and PHP.
    Notable Projects:
    - Mulika Mwizi: A real-time crime reporting platform using Python, Django, and Google Maps API.
    - Kilimo SaaS: A cloud-based farm management solution.
    - Supply Chain Management System: A system for inventory management and order tracking.
  `;

  /**
   * Calls the Gemini API with a given prompt.
   * @param {string} prompt The prompt to send to the API.
   * @returns {Promise<string>} The generated text from the API.
   */
  async function callGemini(prompt) {
    const payload = {
      contents: [{ role: "user", parts: [{ text: prompt }] }],
    };

    try {
      const response = await fetch(API_URL, {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify(payload)
      });

      if (!response.ok) {
        throw new Error(`API request failed with status ${response.status}`);
      }

      const result = await response.json();

      if (result.candidates && result.candidates.length > 0 && result.candidates[0].content.parts.length > 0) {
        return result.candidates[0].content.parts[0].text;
      } else {
        console.error("Unexpected API response structure:", result);
        throw new Error("Could not extract text from API response.");
      }
    } catch (error) {
      console.error("Error calling Gemini API:", error);
      throw error; // Re-throw to be caught by the caller
    }
  }

  // --- Feature 1: Enhance Project Descriptions ---
  const handleEnhanceDescription = async (projectId, originalText, setEnhancedText, setIsEnhancing) => {
    setIsEnhancing(true);
    try {
      const prompt = `You are a professional tech writer. Elaborate on this project description to make it more detailed and engaging for a technical recruiter, using 2-3 sentences. Original description: "${originalText}"`;
      const enhanced = await callGemini(prompt);
      setEnhancedText(enhanced);
    } catch (error) {
      setEnhancedText("Error enhancing description. Please try again.");
      showModal("Error", "Could not connect to the AI assistant. Please check your connection and try again.");
    } finally {
      setIsEnhancing(false);
    }
  };

  // --- Feature 2: Cover Letter Generator ---
  const handleGenerateLetter = async () => {
    if (!jobTitleInput.trim()) {
      setCoverLetterOutput("Please enter a job title.");
      return;
    }

    setIsGeneratingLetter(true);
    setCoverLetterOutput('Generating...');

    try {
      const prompt = `You are a professional career assistant. Based on the resume of Larmek Oduor, a full-stack developer, write a compelling and concise introductory paragraph (3-4 sentences) for a cover letter for the position of '${jobTitleInput}'. Highlight his most relevant skills and experience. Resume summary: \n${resumeSummary}`;
      const letterIntro = await callGemini(prompt);
      setCoverLetterOutput(letterIntro);
    } catch (error) {
      setCoverLetterOutput("Error generating intro. Please try again.");
      showModal("Error", "Could not connect to the AI assistant. Please check your connection and try again.");
    } finally {
      setIsGeneratingLetter(false);
    }
  };

  const SectionTitle = ({ children }) => (
    <h2 className="text-3xl sm:text-4xl font-bold text-white mb-12 text-center">
      {children}
    </h2>
  );

  const LucideIcon = ({ name, className = "w-6 h-6" }) => {
    // This component is a placeholder. In a real React app, you'd import
    // icons from a library like 'lucide-react'. Here, we rely on the
    // global lucide.createIcons() after the script loads.
    return <i data-lucide={name} className={className}></i>;
  };

  return (
    <div className="min-h-screen bg-slate-900 font-inter text-slate-300 scroll-smooth antialiased">
      <style>
        {`
          @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap');
          body {
            font-family: 'Inter', sans-serif;
            background-color: #0f172a; /* Slate 900 */
            color: #cbd5e1; /* Slate 300 */
          }
          .glass-effect {
              background: rgba(30, 41, 59, 0.5); /* Slate 800 with transparency */
              backdrop-filter: blur(12px);
              -webkit-backdrop-filter: blur(12px);
              border: 1px solid rgba(51, 65, 85, 0.5); /* Slate 700 with transparency */
          }
          .accent-color {
              color: #38bdf8; /* Sky 400 */
          }
          .accent-bg {
              background-color: #38bdf8; /* Sky 400 */
          }
          .accent-border {
              border-color: #38bdf8; /* Sky 400 */
          }
          /* section-title is handled by SectionTitle component */
          .nav-link {
              @apply hover:text-sky-400 transition-colors duration-300;
          }
          .skill-badge {
              @apply bg-slate-700 text-sky-300 text-sm font-medium px-3 py-1.5 rounded-full;
          }
          .project-card {
              @apply bg-slate-800 rounded-xl overflow-hidden shadow-lg transition-transform duration-300 hover:-translate-y-2 flex flex-col;
          }
          .timeline-item {
              @apply relative pl-8 sm:pl-12 pb-12;
          }
          .timeline-marker {
              @apply absolute left-0 top-1 h-4 w-4 rounded-full bg-sky-400 border-4 border-slate-700;
          }
          .timeline-line {
              @apply absolute left-[7px] top-2 bottom-0 w-0.5 bg-slate-700;
          }
          /* Styles for Gemini Features */
          .gemini-button {
              @apply bg-gradient-to-r from-sky-500 to-indigo-500 hover:from-sky-600 hover:to-indigo-600 text-white text-xs font-semibold py-2 px-3 rounded-full inline-flex items-center gap-2 transition-all duration-300 transform hover:scale-105 disabled:opacity-50 disabled:cursor-not-allowed;
          }
          .gemini-button .loader {
              @apply w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin;
          }
          #ai-modal-backdrop {
              @apply fixed inset-0 bg-black/60 z-50 flex items-center justify-center p-4;
          }
          #ai-modal {
              @apply bg-slate-800 rounded-2xl shadow-2xl p-6 w-full max-w-2xl text-left transform transition-all;
          }
        `}
      </style>

      {/* Header & Navigation */}
      <header id="header" className={`fixed top-0 left-0 right-0 z-40 transition-all duration-300 ${isHeaderScrolled ? 'glass-effect' : ''}`}>
        <nav className="container mx-auto px-6 py-4 flex justify-between items-center">
          <a href="#home" className="text-2xl font-bold text-white">Larmek Oduor</a>
          <div className="hidden md:flex items-center space-x-8 text-white">
            <a href="#home" className="nav-link">Home</a>
            <a href="#about" className="nav-link">About</a>
            <a href="#experience" className="nav-link">Experience</a>
            <a href="#projects" className="nav-link">Projects</a>
            <a href="#contact" className="nav-link">Contact</a>
          </div>
          <a href={`mailto:${portfolioData.contact.email}`} className="hidden md:block bg-sky-500 hover:bg-sky-600 text-white font-semibold py-2 px-4 rounded-lg transition-colors duration-300">
            Hire Me
          </a>
          {/* Mobile Menu Button */}
          <button id="mobile-menu-button" className="md:hidden text-white" onClick={() => setIsMobileMenuOpen(!isMobileMenuOpen)}>
            <LucideIcon name="menu" />
          </button>
        </nav>
        {/* Mobile Menu */}
        <div id="mobile-menu" className={`${isMobileMenuOpen ? 'block' : 'hidden'} md:hidden bg-slate-800`}>
          <a href="#home" className="block py-2 px-4 text-sm text-white hover:bg-slate-700" onClick={() => setIsMobileMenuOpen(false)}>Home</a>
          <a href="#about" className="block py-2 px-4 text-sm text-white hover:bg-slate-700" onClick={() => setIsMobileMenuOpen(false)}>About</a>
          <a href="#experience" className="block py-2 px-4 text-sm text-white hover:bg-slate-700" onClick={() => setIsMobileMenuOpen(false)}>Experience</a>
          <a href="#projects" className="block py-2 px-4 text-sm text-white hover:bg-slate-700" onClick={() => setIsMobileMenuOpen(false)}>Projects</a>
          <a href="#contact" className="block py-2 px-4 text-sm text-white hover:bg-slate-700" onClick={() => setIsMobileMenuOpen(false)}>Contact</a>
        </div>
      </header>

      <main>
        {/* Hero Section */}
        <section id="home" className="min-h-screen flex items-center bg-cover bg-center bg-fixed" style={{ backgroundImage: `url('https://images.unsplash.com/photo-1487058792275-0ad4aaf24ca7?q=80&w=2070&auto=format&fit=crop')` }}>
          <div className="absolute inset-0 bg-slate-900/80"></div>
          <div className="container mx-auto px-6 text-center relative z-10">
            <h1 className="text-4xl md:text-6xl lg:text-7xl font-extrabold text-white leading-tight mb-4">
              I'm {portfolioData.name}
            </h1>
            <p className="text-xl md:text-2xl text-sky-300 mb-8">
              {portfolioData.title}
            </p>
            <div className="flex justify-center flex-wrap gap-4">
              <a href="#projects" className="bg-sky-500 hover:bg-sky-600 text-white font-bold py-3 px-8 rounded-full text-lg transition-transform duration-300 transform hover:scale-105">
                View My Work
              </a>
              <a href="#contact" className="bg-slate-700 hover:bg-slate-600 text-white font-bold py-3 px-8 rounded-full text-lg transition-transform duration-300 transform hover:scale-105">
                Get In Touch
              </a>
            </div>
          </div>
        </section>

        {/* About Section */}
        <section id="about" className="py-20 sm:py-32">
          <div className="container mx-auto px-6">
            <SectionTitle>About Me</SectionTitle>
            <div className="grid grid-cols-1 lg:grid-cols-5 gap-12 items-center">
              <div className="lg:col-span-2">
                <img src="https://placehold.co/600x600/1e293b/38bdf8?text=LO"
                  alt="Portrait of Larmek Oduor"
                  className="rounded-2xl shadow-2xl w-full h-auto object-cover aspect-square" />
              </div>
              <div className="lg:col-span-3">
                <h3 className="text-2xl font-semibold text-white mb-4">Passionate & Results-Driven Developer</h3>
                <p className="mb-6 text-lg text-slate-300">
                  {portfolioData.profile.split('. ')[0]}. {portfolioData.profile.split('. ')[1]}.
                </p>
                <p className="mb-8 text-lg text-slate-300">
                  {portfolioData.profile.split('. ')[2]}. {portfolioData.profile.split('. ')[3]}.
                </p>
                <h4 className="text-xl font-semibold text-white mb-4">My Skills</h4>
                <div className="flex flex-wrap gap-3">
                  {Object.values(portfolioData.technicalSkills).flat().map((skill, index) => (
                    <span key={index} className="skill-badge">{skill}</span>
                  ))}
                </div>
              </div>
            </div>
          </div>
        </section>

        {/* Experience Section */}
        <section id="experience" className="py-20 sm:py-32 bg-slate-900">
          <div className="container mx-auto px-6">
            <SectionTitle>Work Experience</SectionTitle>
            <div className="max-w-3xl mx-auto">
              <div className="relative">
                {/* Timeline Line */}
                <div className="timeline-line"></div>

                {portfolioData.experience.map((job, index) => (
                  <div key={index} className="timeline-item">
                    <div className="timeline-marker"></div>
                    <div className="ml-4">
                      <p className="text-sky-400 font-semibold">{job.dates}</p>
                      <h3 className="text-xl font-bold text-white mt-1">{job.title}</h3>
                      <p className="text-slate-400 font-medium">{job.company}</p>
                      <p className="mt-2 text-slate-300">{job.description[0]}</p>
                    </div>
                  </div>
                ))}
              </div>
            </div>
          </div>
        </section>

        {/* Projects Section */}
        <section id="projects" className="py-20 sm:py-32">
          <div className="container mx-auto px-6">
            <SectionTitle>Featured Projects</SectionTitle>
            <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">
              {portfolioData.projects.map((project, index) => {
                const [enhancedDescription, setEnhancedDescription] = useState(project.description);
                const [isEnhancing, setIsEnhancing] = useState(false);

                return (
                  <div key={index} className="project-card">
                    <img src={project.imageUrl} alt={`${project.name} Project`} className="w-full h-48 object-cover" onError={(e) => { e.target.onerror = null; e.target.src = `https://placehold.co/600x400/1e293b/38bdf8?text=${project.name.replace(/\s/g, '+')}`; }} />
                    <div className="p-6 flex-grow flex flex-col">
                      <h3 className="text-xl font-bold text-white mb-2">{project.name}</h3>
                      <p className="project-description mb-4 text-slate-300 flex-grow" data-original={project.description}>{enhancedDescription}</p>
                      <div className="mt-auto pt-4 border-t border-slate-700 flex justify-between items-center gap-4">
                        <button
                          className="gemini-button enhance-description-btn"
                          onClick={() => handleEnhanceDescription(index, project.description, setEnhancedDescription, setIsEnhancing)}
                          disabled={isEnhancing}
                        >
                          {isEnhancing ? (
                            <>
                              <span className="loader"></span>
                              <span>Enhancing...</span>
                            </>
                          ) : (
                            <span>{enhancedDescription === project.description ? '✨ Enhance' : '🔄 Reset'}</span>
                          )}
                        </button>
                        <a href={project.githubUrl} target="_blank" rel="noopener noreferrer" className="text-slate-400 hover:text-white transition-colors duration-300">
                          <LucideIcon name="github" />
                        </a>
                      </div>
                    </div>
                  </div>
                );
              })}
            </div>
          </div>
        </section>

        {/* Contact Section */}
        <section id="contact" className="py-20 sm:py-32 bg-slate-900">
          <div className="container mx-auto px-6 text-center">
            <SectionTitle>Get In Touch</SectionTitle>
            <p className="max-w-2xl mx-auto mb-8 text-lg text-slate-300">
              I'm currently open to new opportunities. Feel free to reach out directly or use the AI assistant below to draft a cover letter introduction for a specific role.
            </p>

            {/* Gemini Cover Letter Feature */}
            <div className="max-w-2xl mx-auto bg-slate-800 p-8 rounded-2xl border border-slate-700">
              <h3 className="text-xl font-bold text-white mb-4">✨ AI Cover Letter Assistant</h3>
              <p className="text-slate-400 mb-6">Want to see how my skills fit your needs? Enter a job title below.</p>
              <div className="flex flex-col sm:flex-row gap-4 mb-4">
                <input
                  type="text"
                  id="job-title-input"
                  placeholder="e.g., Senior Python Developer"
                  className="w-full bg-slate-700 text-white placeholder-slate-400 rounded-lg px-4 py-3 border border-slate-600 focus:ring-2 focus:ring-sky-500 focus:outline-none"
                  value={jobTitleInput}
                  onChange={(e) => setJobTitleInput(e.target.value)}
                />
                <button
                  id="generate-letter-btn"
                  className="gemini-button justify-center flex-shrink-0 px-6"
                  onClick={handleGenerateLetter}
                  disabled={isGeneratingLetter}
                >
                  {isGeneratingLetter ? (
                    <>
                      <span className="loader"></span>
                      <span>Generating...</span>
                    </>
                  ) : (
                    <span>Generate Intro</span>
                  )}
                </button>
              </div>
              <div id="cover-letter-output" className="text-left bg-slate-900 p-4 rounded-lg min-h-[100px] text-slate-300 whitespace-pre-wrap transition-all duration-300">
                {coverLetterOutput}
              </div>
            </div>

          </div>
        </section>
      </main>

      {/* Footer */}
      <footer className="bg-slate-900 border-t border-slate-800">
        <div className="container mx-auto px-6 py-8">
          <div className="flex flex-col md:flex-row justify-between items-center">
            <p className="text-slate-400 mb-4 md:mb-0">&copy; {new Date().getFullYear()} {portfolioData.name.split(' ')[0]} {portfolioData.name.split(' ')[1]}. All Rights Reserved.</p>
            <div className="flex space-x-6">
              <a href={portfolioData.contact.github} target="_blank" rel="noopener noreferrer" className="text-slate-400 hover:text-sky-400 transition-colors duration-300">
                <LucideIcon name="github" />
              </a>
              <a href={portfolioData.contact.linkedin} target="_blank" rel="noopener noreferrer" className="text-slate-400 hover:text-sky-400 transition-colors duration-300">
                <LucideIcon name="linkedin" />
              </a>
              <a href={`mailto:${portfolioData.contact.email}`} className="text-slate-400 hover:text-sky-400 transition-colors duration-300">
                <LucideIcon name="mail" />
              </a>
            </div>
          </div>
        </div>
      </footer>

      {/* AI Modal */}
      {modalVisible && (
        <div id="ai-modal-backdrop" className="fixed inset-0 bg-black/60 z-50 flex items-center justify-center p-4" onClick={(e) => e.target.id === 'ai-modal-backdrop' && hideModal()}>
          <div id="ai-modal" className="bg-slate-800 rounded-2xl shadow-2xl p-6 w-full max-w-2xl text-left transform transition-all">
            <h3 id="ai-modal-title" className="text-xl font-bold text-white mb-4">{modalContent.title}</h3>
            <div id="ai-modal-content" className="text-slate-300 whitespace-pre-wrap">{modalContent.text}</div>
            <div className="text-right mt-6">
              <button id="ai-modal-close" className="bg-sky-500 hover:bg-sky-600 text-white font-semibold py-2 px-4 rounded-lg" onClick={hideModal}>Close</button>
            </div>
          </div>
        </div>
      )}
    </div>
  );
}

export default App;
import React, { useState, useEffect, useRef, useCallback } from 'react';

function App() {
  const portfolioData = {
    name: "LARMECK ODUOR ODHIAMBO",
    title: "Web Developer | Full-Stack Developer",
    contact: {
      phone: "+254723294700",
      email: "larmeckoduor@gmail.com",
      linkedin: "https://linkedin.com/in/larmeck-oduor-a4753b9a/",
      github: "https://github.com/larmeck",
    },
    profile: "I am a passionate and results-driven Web Developer with a strong foundation in both front-end and back-end technologies. I am proficient in JavaScript, HTML, CSS, PHP, Python, Django, ReactJS, Slim PHP, and Bootstrap 3,4 and 5. My experience includes building scalable and user-centric applications from scratch and across various domains, including e-commerce, supply chain management, and agriculture SaaS. I am highly motivated to solve real-world problems through software and enjoy working in agile environments emphasizing collaboration and innovation. My skills also extend to server management, where I have hands-on experience deploying and maintaining applications, optimizing performance, and ensuring high availability.",
    technicalSkills: {
      languages: ["JavaScript", "HTML", "CSS", "PHP", "Python"],
      frameworksLibraries: ["Django", "Bootstrap", "Slim PHP", "ReactJs"],
      webTechnologies: ["Responsive Design", "RESTful APIs", "AJAX", "JSON", "XML", "WordPress"],
      versionControl: ["Git", "GitHub", "GitLab"],
      databases: ["MySQL", "PostgreSQL"],
      other: ["jQuery", "AJAX", "Node.js", "Docker", "Nginx", "Apache"],
      toolsPlatforms: ["Visual Studio Code", "Postman", "Heroku", "AWS", "Netlify", "Linux/Unix"],
    },
    experience: [
      {
        title: "Web Developer",
        company: "Fremont International Association",
        dates: "Jan 2024 – Present",
        description: [
          "Developed and maintained scalable, enterprise-level web applications for clients in multiple sectors, including supply chain and logistics.",
          "Played a key role in the Supply Chain Management System, a web-based platform developed using Python and MySQL. Optimized real-time processing of supply chain operations and integrated advanced reporting features to aid decision-making.",
          "Led the development of the Mulika Mwizi platform, a crime reporting and alerting tool, Django, which displayed employee objectives, satisfaction rates, and recommendations.",
          "Managed server environments using Docker, Nginx, and AWS, ensuring smooth deployment and scalability.",
          "Conducted regular code reviews and mentored junior developers on best practices in coding, debugging, and performance optimization.",
        ],
      },
      {
        title: "Full-Stack Developer",
        company: "Kilimo SaaS",
        dates: "2019 – 2024",
        description: [
          "Developed and maintained the Kilimo SaaS platform, a cloud-based farm management system for farmers, tracking crop cycles, weather data, and financial records.",
          "Built the back-end of the application using Slim PHP, ensuring a lightweight, high-performance architecture for handling user requests efficiently.",
          "Integrated MySQL for data management and utilized JavaScript for dynamic user interfaces.",
          "Developed RESTful APIs to enable seamless interaction between the front-end and back-end.",
        ],
      },
      {
        title: "React.js Developer",
        company: "Kilimo Online Website",
        dates: "2019 – 2024 (part of Kilimo SaaS experience)",
        description: [
          "Designed and developed a fully responsive, user-friendly agricultural platform using React.js.",
          "Integrated real-time data fetching from APIs to display accurate and dynamic agricultural information.",
          "Utilized React Router to create seamless navigation between product categories, services, and customer resources.",
          "Implemented Redux for state management to handle complex data flow and user interactions.",
          "Optimized performance to ensure fast loading times and smooth interactions across devices.",
          "Developed custom components for interactive user features like product filtering and search functionality.",
          "Ensured cross-browser compatibility and responsiveness, improving the user experience on mobile and desktop devices.",
          "Incorporated security best practices to protect sensitive user information.",
        ],
      },
      {
        title: "Intern – Web Development",
        company: "Uko Technologies",
        dates: "Jan 2015 – Dec 2018",
        description: [
          "Assisted in developing client-facing websites and web applications using HTML, CSS, JavaScript, PHP, and MySQL.",
          "Contributed to the development of a custom inventory management system using JavaScript for the front-end and PHP for server-side functionality.",
          "Worked closely with senior developers to implement database structures, optimize website performance, and ensure that sites were responsive and user-friendly.",
        ],
      },
    ],
    projects: [
      {
        name: "Mulika Mwizi",
        description: "A platform for reporting and tracking crimes in real-time using Python and Django, with Google Maps API for location-based reporting and WebSockets for live notifications.",
        imageUrl: "https://images.unsplash.com/photo-1526628953301-3e589a6a8b74?q=80&w=1974&auto=format&fit=crop",
        githubUrl: "https://github.com/larmeck"
      },
      {
        name: "Kilimo SaaS",
        description: "A cloud-based farm management solution for farmers to track crop cycles, weather, and finances. Built with Slim PHP, React.js, and MySQL.",
        imageUrl: "https://images.unsplash.com/photo-1580983216298-4341a7d80a1e?q=80&w=2070&auto=format&fit=crop",
        githubUrl: "https://github.com/larmeck"
      },
      {
        name: "Supply Chain Management System",
        description: "A web-based inventory and supply chain system using Python and MySQL to improve operational efficiency and provide real-time order tracking and reporting.",
        imageUrl: "https://images.unsplash.com/photo-1556740738-b6a63e27c4df?q=80&w=2070&auto=format&fit=crop",
        githubUrl: "https://github.com/larmeck"
      },
      {
        name: "School Registration System",
        description: "Created a student registration system for schools to automate enrollment, utilizing PHP for server-side logic and MySQL for data management. Built dynamic front-end interactions using JavaScript to enhance the user experience.",
        imageUrl: "https://placehold.co/600x400/1e293b/38bdf8?text=School+Reg",
        githubUrl: "https://github.com/larmeck"
      },
      {
        name: "Website Development",
        description: "Designed and developed multiple custom websites and e-commerce solutions using Bootstrap for responsive design and JavaScript for interactivity. Implemented SEO strategies and optimized for mobile devices.",
        imageUrl: "https://placehold.co/600x400/1e293b/38bdf8?text=Web+Dev",
        githubUrl: "https://github.com/larmeck"
      },
    ],
    education: {
      degree: "Bachelor of Science in Biotechnology",
      university: "Kenyatta University",
      year: "2014",
    },
    certifications: [
      "HTML & CSS – W3Schools",
      "JavaScript – W3Schools",
      "Python – W3Schools",
      "Django – W3Schools",
      "PHP – W3Schools",
      "SQL – W3Schools",
      "Bootstrap – W3Schools",
      "GIT – W3Skulls",
      "ReactJS – W3Skull",
    ],
  };

  const [isMobileMenuOpen, setIsMobileMenuOpen] = useState(false);
  const [isHeaderScrolled, setIsHeaderScrolled] = useState(false);
  const [modalVisible, setModalVisible] = useState(false);
  const [modalContent, setModalContent] = useState({ title: '', text: '' });
  const [coverLetterOutput, setCoverLetterOutput] = useState('');
  const [jobTitleInput, setJobTitleInput] = useState('');
  const [isGeneratingLetter, setIsGeneratingLetter] = useState(false);
  const [lucideLoaded, setLucideLoaded] = useState(false);

  // Ref to hold Lucide icons script
  const lucideScriptRef = useRef(null);

  useEffect(() => {
    // Load Lucide icons script
    if (!lucideScriptRef.current) {
      const script = document.createElement('script');
      script.src = "https://unpkg.com/lucide@latest";
      script.async = true;
      script.onload = () => {
        setLucideLoaded(true); // Indicate that Lucide is loaded
      };
      document.body.appendChild(script);
      lucideScriptRef.current = script;
    } else if (window.lucide) {
      setLucideLoaded(true); // Already loaded
    }

    const handleScroll = () => {
      setIsHeaderScrolled(window.scrollY > 50);
    };

    window.addEventListener('scroll', handleScroll);

    return () => {
      window.removeEventListener('scroll', handleScroll);
    };
  }, []); // Empty dependency array means this runs once on mount

  // Function to show modal
  const showModal = (title, text) => {
    setModalContent({ title, text });
    setModalVisible(true);
  };

  // Function to hide modal
  const hideModal = () => {
    setModalVisible(false);
    setModalContent({ title: '', text: '' });
  };

  const API_KEY = ""; // Leave empty, Canvas will handle it.
  const API_URL = `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-05-20:generateContent?key=${API_KEY}`;

  const resumeSummary = `
    Larmek Oduor is a results-driven Web Developer with experience in front-end and back-end technologies, including JavaScript, Python, PHP, React.js, Django, and Node.js. He has built scalable applications for e-commerce, supply chain management, and agriculture SaaS.
    Key Experience:
    - Web Developer at Fremont International Association (2024-Present): Developed enterprise web apps for supply chain/logistics using Python, MySQL, Docker, and AWS.
    - Full-Stack Developer at Kilimo SaaS (2019-2024): Developed a farm management SaaS platform using Slim PHP, React.js, and MySQL.
    - Intern at Uko Technologies (2015-2018): Assisted in developing websites with HTML, CSS, JavaScript, and PHP.
    Notable Projects:
    - Mulika Mwizi: A real-time crime reporting platform using Python, Django, and Google Maps API.
    - Kilimo SaaS: A cloud-based farm management solution.
    - Supply Chain Management System: A system for inventory management and order tracking.
  `;

  /**
   * Calls the Gemini API with a given prompt.
   * @param {string} prompt The prompt to send to the API.
   * @returns {Promise<string>} The generated text from the API.
   */
  const callGemini = useCallback(async (prompt) => {
    const payload = {
      contents: [{ role: "user", parts: [{ text: prompt }] }],
    };

    try {
      const response = await fetch(API_URL, {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify(payload)
      });

      if (!response.ok) {
        throw new Error(`API request failed with status ${response.status}`);
      }

      const result = await response.json();

      if (result.candidates && result.candidates.length > 0 && result.candidates[0].content.parts.length > 0) {
        return result.candidates[0].content.parts[0].text;
      } else {
        console.error("Unexpected API response structure:", result);
        throw new Error("Could not extract text from API response.");
      }
    } catch (error) {
      console.error("Error calling Gemini API:", error);
      throw error; // Re-throw to be caught by the caller
    }
  }, [API_URL]); // Dependency array for useCallback

  // --- Feature 1: Enhance Project Descriptions ---
  const handleEnhanceDescription = async (projectId, originalText, setEnhancedText, setIsEnhancing) => {
    setIsEnhancing(true);
    try {
      const prompt = `You are a professional tech writer. Elaborate on this project description to make it more detailed and engaging for a technical recruiter, using 2-3 sentences. Original description: "${originalText}"`;
      const enhanced = await callGemini(prompt);
      setEnhancedText(enhanced);
    } catch (error) {
      setEnhancedText("Error enhancing description. Please try again.");
      showModal("Error", "Could not connect to the AI assistant. Please check your connection and try again.");
    } finally {
      setIsEnhancing(false);
    }
  };

  // --- Feature 2: Cover Letter Generator ---
  const handleGenerateLetter = async () => {
    if (!jobTitleInput.trim()) {
      setCoverLetterOutput("Please enter a job title.");
      return;
    }

    setIsGeneratingLetter(true);
    setCoverLetterOutput('Generating...');

    try {
      const prompt = `You are a professional career assistant. Based on the resume of Larmek Oduor, a full-stack developer, write a compelling and concise introductory paragraph (3-4 sentences) for a cover letter for the position of '${jobTitleInput}'. Highlight his most relevant skills and experience. Resume summary: \n${resumeSummary}`;
      const letterIntro = await callGemini(prompt);
      setCoverLetterOutput(letterIntro);
    } catch (error) {
      setCoverLetterOutput("Error generating intro. Please try again.");
      showModal("Error", "Could not connect to the AI assistant. Please check your connection and try again.");
    } finally {
      setIsGeneratingLetter(false);
    }
  };

  const SectionTitle = ({ children }) => (
    <h2 className="text-3xl sm:text-4xl font-bold text-white mb-12 text-center">
      {children}
    </h2>
  );

  // Custom LucideIcon component to render SVGs safely within React
  const LucideIcon = ({ name, className = "w-6 h-6" }) => {
    const [svgHtml, setSvgHtml] = useState('');

    useEffect(() => {
      if (lucideLoaded && window.lucide && window.lucide.icons[name]) {
        // Get the SVG string from Lucide and set it
        const iconNode = window.lucide.icons[name].toNode();
        const svgString = new XMLSerializer().serializeToString(iconNode);
        setSvgHtml(svgString);
      } else {
        // Fallback or handle not loaded state
        setSvgHtml('');
      }
    }, [name, lucideLoaded]); // Re-run when name or lucideLoaded changes

    // Render the SVG using dangerouslySetInnerHTML
    return (
      <span className={`flex items-center justify-center ${className}`} dangerouslySetInnerHTML={{ __html: svgHtml }} />
    );
  };

  return (
    <div className="min-h-screen bg-slate-900 font-inter text-slate-300 scroll-smooth antialiased">
      <style>
        {`
          @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap');
          body {
            font-family: 'Inter', sans-serif;
            background-color: #0f172a; /* Slate 900 */
            color: #cbd5e1; /* Slate 300 */
          }
          .glass-effect {
              background: rgba(30, 41, 59, 0.5); /* Slate 800 with transparency */
              backdrop-filter: blur(12px);
              -webkit-backdrop-filter: blur(12px);
              border: 1px solid rgba(51, 65, 85, 0.5); /* Slate 700 with transparency */
          }
          .accent-color {
              color: #38bdf8; /* Sky 400 */
          }
          .accent-bg {
              background-color: #38bdf8; /* Sky 400 */
          }
          .accent-border {
              border-color: #38bdf8; /* Sky 400 */
          }
          /* section-title is handled by SectionTitle component */
          .nav-link {
              @apply hover:text-sky-400 transition-colors duration-300;
          }
          .skill-badge {
              @apply bg-slate-700 text-sky-300 text-sm font-medium px-3 py-1.5 rounded-full;
          }
          .project-card {
              @apply bg-slate-800 rounded-xl overflow-hidden shadow-lg transition-transform duration-300 hover:-translate-y-2 flex flex-col;
          }
          .timeline-item {
              @apply relative pl-8 sm:pl-12 pb-12;
          }
          .timeline-marker {
              @apply absolute left-0 top-1 h-4 w-4 rounded-full bg-sky-400 border-4 border-slate-700;
          }
          .timeline-line {
              @apply absolute left-[7px] top-2 bottom-0 w-0.5 bg-slate-700;
          }
          /* Styles for Gemini Features */
          .gemini-button {
              @apply bg-gradient-to-r from-sky-500 to-indigo-500 hover:from-sky-600 hover:to-indigo-600 text-white text-xs font-semibold py-2 px-3 rounded-full inline-flex items-center gap-2 transition-all duration-300 transform hover:scale-105 disabled:opacity-50 disabled:cursor-not-allowed;
          }
          .gemini-button .loader {
              @apply w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin;
          }
          #ai-modal-backdrop {
              @apply fixed inset-0 bg-black/60 z-50 flex items-center justify-center p-4;
          }
          #ai-modal {
              @apply bg-slate-800 rounded-2xl shadow-2xl p-6 w-full max-w-2xl text-left transform transition-all;
          }
        `}
      </style>

      {/* Header & Navigation */}
      <header id="header" className={`fixed top-0 left-0 right-0 z-40 transition-all duration-300 ${isHeaderScrolled ? 'glass-effect' : ''}`}>
        <nav className="container mx-auto px-6 py-4 flex justify-between items-center">
          <a href="#home" className="text-2xl font-bold text-white">Larmek Oduor</a>
          <div className="hidden md:flex items-center space-x-8 text-white">
            <a href="#home" className="nav-link">Home</a>
            <a href="#about" className="nav-link">About</a>
            <a href="#experience" className="nav-link">Experience</a>
            <a href="#projects" className="nav-link">Projects</a>
            <a href="#contact" className="nav-link">Contact</a>
          </div>
          <a href={`mailto:${portfolioData.contact.email}`} className="hidden md:block bg-sky-500 hover:bg-sky-600 text-white font-semibold py-2 px-4 rounded-lg transition-colors duration-300">
            Hire Me
          </a>
          {/* Mobile Menu Button */}
          <button id="mobile-menu-button" className="md:hidden text-white" onClick={() => setIsMobileMenuOpen(!isMobileMenuOpen)}>
            <LucideIcon name="menu" />
          </button>
        </nav>
        {/* Mobile Menu */}
        <div id="mobile-menu" className={`${isMobileMenuOpen ? 'block' : 'hidden'} md:hidden bg-slate-800`}>
          <a href="#home" className="block py-2 px-4 text-sm text-white hover:bg-slate-700" onClick={() => setIsMobileMenuOpen(false)}>Home</a>
          <a href="#about" className="block py-2 px-4 text-sm text-white hover:bg-slate-700" onClick={() => setIsMobileMenuOpen(false)}>About</a>
          <a href="#experience" className="block py-2 px-4 text-sm text-white hover:bg-slate-700" onClick={() => setIsMobileMenuOpen(false)}>Experience</a>
          <a href="#projects" className="block py-2 px-4 text-sm text-white hover:bg-slate-700" onClick={() => setIsMobileMenuOpen(false)}>Projects</a>
          <a href="#contact" className="block py-2 px-4 text-sm text-white hover:bg-slate-700" onClick={() => setIsMobileMenuOpen(false)}>Contact</a>
        </div>
      </header>

      <main>
        {/* Hero Section */}
        <section id="home" className="min-h-screen flex items-center bg-cover bg-center bg-fixed" style={{ backgroundImage: `url('https://images.unsplash.com/photo-1487058792275-0ad4aaf24ca7?q=80&w=2070&auto=format&fit=crop')` }}>
          <div className="absolute inset-0 bg-slate-900/80"></div>
          <div className="container mx-auto px-6 text-center relative z-10">
            <h1 className="text-4xl md:text-6xl lg:text-7xl font-extrabold text-white leading-tight mb-4">
              I'm {portfolioData.name}
            </h1>
            <p className="text-xl md:text-2xl text-sky-300 mb-8">
              {portfolioData.title}
            </p>
            <div className="flex justify-center flex-wrap gap-4">
              <a href="#projects" className="bg-sky-500 hover:bg-sky-600 text-white font-bold py-3 px-8 rounded-full text-lg transition-transform duration-300 transform hover:scale-105">
                View My Work
              </a>
              <a href="#contact" className="bg-slate-700 hover:bg-slate-600 text-white font-bold py-3 px-8 rounded-full text-lg transition-transform duration-300 transform hover:scale-105">
                Get In Touch
              </a>
            </div>
          </div>
        </section>

        {/* About Section */}
        <section id="about" className="py-20 sm:py-32">
          <div className="container mx-auto px-6">
            <SectionTitle>About Me</SectionTitle>
            <div className="grid grid-cols-1 lg:grid-cols-5 gap-12 items-center">
              <div className="lg:col-span-2">
                <img src="https://placehold.co/600x600/1e293b/38bdf8?text=LO"
                  alt="Portrait of Larmek Oduor"
                  className="rounded-2xl shadow-2xl w-full h-auto object-cover aspect-square" />
              </div>
              <div className="lg:col-span-3">
                <h3 className="text-2xl font-semibold text-white mb-4">Passionate & Results-Driven Developer</h3>
                <p className="mb-6 text-lg text-slate-300">
                  {portfolioData.profile.split('. ')[0]}. {portfolioData.profile.split('. ')[1]}.
                </p>
                <p className="mb-8 text-lg text-slate-300">
                  {portfolioData.profile.split('. ')[2]}. {portfolioData.profile.split('. ')[3]}.
                </p>
                <h4 className="text-xl font-semibold text-white mb-4">My Skills</h4>
                <div className="flex flex-wrap gap-3">
                  {Object.values(portfolioData.technicalSkills).flat().map((skill, index) => (
                    <span key={index} className="skill-badge">{skill}</span>
                  ))}
                </div>
              </div>
            </div>
          </div>
        </section>

        {/* Experience Section */}
        <section id="experience" className="py-20 sm:py-32 bg-slate-900">
          <div className="container mx-auto px-6">
            <SectionTitle>Work Experience</SectionTitle>
            <div className="max-w-3xl mx-auto">
              <div className="relative">
                {/* Timeline Line */}
                <div className="timeline-line"></div>

                {portfolioData.experience.map((job, index) => (
                  <div key={index} className="timeline-item">
                    <div className="timeline-marker"></div>
                    <div className="ml-4">
                      <p className="text-sky-400 font-semibold">{job.dates}</p>
                      <h3 className="text-xl font-bold text-white mt-1">{job.title}</h3>
                      <p className="text-slate-400 font-medium">{job.company}</p>
                      <p className="mt-2 text-slate-300">{job.description[0]}</p>
                    </div>
                  </div>
                ))}
              </div>
            </div>
          </div>
        </section>

        {/* Projects Section */}
        <section id="projects" className="py-20 sm:py-32">
          <div className="container mx-auto px-6">
            <SectionTitle>Featured Projects</SectionTitle>
            <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">
              {portfolioData.projects.map((project, index) => {
                const [enhancedDescription, setEnhancedDescription] = useState(project.description);
                const [isEnhancing, setIsEnhancing] = useState(false);

                return (
                  <div key={index} className="project-card">
                    <img src={project.imageUrl} alt={`${project.name} Project`} className="w-full h-48 object-cover" onError={(e) => { e.target.onerror = null; e.target.src = `https://placehold.co/600x400/1e293b/38bdf8?text=${project.name.replace(/\s/g, '+')}`; }} />
                    <div className="p-6 flex-grow flex flex-col">
                      <h3 className="text-xl font-bold text-white mb-2">{project.name}</h3>
                      <p className="project-description mb-4 text-slate-300 flex-grow" data-original={project.description}>{enhancedDescription}</p>
                      <div className="mt-auto pt-4 border-t border-slate-700 flex justify-between items-center gap-4">
                        <button
                          className="gemini-button enhance-description-btn"
                          onClick={() => handleEnhanceDescription(index, project.description, setEnhancedDescription, setIsEnhancing)}
                          disabled={isEnhancing}
                        >
                          {isEnhancing ? (
                            <>
                              <span className="loader"></span>
                              <span>Enhancing...</span>
                            </>
                          ) : (
                            <span>{enhancedDescription === project.description ? '✨ Enhance' : '🔄 Reset'}</span>
                          )}
                        </button>
                        <a href={project.githubUrl} target="_blank" rel="noopener noreferrer" className="text-slate-400 hover:text-white transition-colors duration-300">
                          <LucideIcon name="github" />
                        </a>
                      </div>
                    </div>
                  </div>
                );
              })}
            </div>
          </div>
        </section>

        {/* Contact Section */}
        <section id="contact" className="py-20 sm:py-32 bg-slate-900">
          <div className="container mx-auto px-6 text-center">
            <SectionTitle>Get In Touch</SectionTitle>
            <p className="max-w-2xl mx-auto mb-8 text-lg text-slate-300">
              I'm currently open to new opportunities. Feel free to reach out directly or use the AI assistant below to draft a cover letter introduction for a specific role.
            </p>

            {/* Gemini Cover Letter Feature */}
            <div className="max-w-2xl mx-auto bg-slate-800 p-8 rounded-2xl border border-slate-700">
              <h3 className="text-xl font-bold text-white mb-4">✨ AI Cover Letter Assistant</h3>
              <p className="text-slate-400 mb-6">Want to see how my skills fit your needs? Enter a job title below.</p>
              <div className="flex flex-col sm:flex-row gap-4 mb-4">
                <input
                  type="text"
                  id="job-title-input"
                  placeholder="e.g., Senior Python Developer"
                  className="w-full bg-slate-700 text-white placeholder-slate-400 rounded-lg px-4 py-3 border border-slate-600 focus:ring-2 focus:ring-sky-500 focus:outline-none"
                  value={jobTitleInput}
                  onChange={(e) => setJobTitleInput(e.target.value)}
                />
                <button
                  id="generate-letter-btn"
                  className="gemini-button justify-center flex-shrink-0 px-6"
                  onClick={handleGenerateLetter}
                  disabled={isGeneratingLetter}
                >
                  {isGeneratingLetter ? (
                    <>
                      <span className="loader"></span>
                      <span>Generating...</span>
                    </>
                  ) : (
                    <span>Generate Intro</span>
                  )}
                </button>
              </div>
              <div id="cover-letter-output" className="text-left bg-slate-900 p-4 rounded-lg min-h-[100px] text-slate-300 whitespace-pre-wrap transition-all duration-300">
                {coverLetterOutput}
              </div>
            </div>

          </div>
        </section>
      </main>

      {/* Footer */}
      <footer className="bg-slate-900 border-t border-slate-800">
        <div className="container mx-auto px-6 py-8">
          <div className="flex flex-col md:flex-row justify-between items-center">
            <p className="text-slate-400 mb-4 md:mb-0">&copy; {new Date().getFullYear()} {portfolioData.name.split(' ')[0]} {portfolioData.name.split(' ')[1]}. All Rights Reserved.</p>
            <div className="flex space-x-6">
              <a href={portfolioData.contact.github} target="_blank" rel="noopener noreferrer" className="text-slate-400 hover:text-sky-400 transition-colors duration-300">
                <LucideIcon name="github" />
              </a>
              <a href={portfolioData.contact.linkedin} target="_blank" rel="noopener noreferrer" className="text-slate-400 hover:text-sky-400 transition-colors duration-300">
                <LucideIcon name="linkedin" />
              </a>
              <a href={`mailto:${portfolioData.contact.email}`} className="text-slate-400 hover:text-sky-400 transition-colors duration-300">
                <LucideIcon name="mail" />
              </a>
            </div>
          </div>
        </div>
      </footer>

      {/* AI Modal */}
      {modalVisible && (
        <div id="ai-modal-backdrop" className="fixed inset-0 bg-black/60 z-50 flex items-center justify-center p-4" onClick={(e) => e.target.id === 'ai-modal-backdrop' && hideModal()}>
          <div id="ai-modal" className="bg-slate-800 rounded-2xl shadow-2xl p-6 w-full max-w-2xl text-left transform transition-all">
            <h3 id="ai-modal-title" className="text-xl font-bold text-white mb-4">{modalContent.title}</h3>
            <div id="ai-modal-content" className="text-slate-300 whitespace-pre-wrap">{modalContent.text}</div>
            <div className="text-right mt-6">
              <button id="ai-modal-close" className="bg-sky-500 hover:bg-sky-600 text-white font-semibold py-2 px-4 rounded-lg" onClick={hideModal}>Close</button>
            </div>
          </div>
        </div>
      )}
    </div>
  );
}

export default App;
